#{extends 'main.html' /}
#{set title:'Home' /}

#{list items:donnees, as:'ligne'}
<h2> Population : ${ligne.population*1000}</h2>
#{/list}
<h3>
esperance_vie : ${esperance_vie}
</h3>

<section id="gauche">
	<form method="post" action="#">
		<select id="pays" multiple>
			<option selected disabled>Pays</option>
			#{list items:listePays, as:'pays'}
				<option value="${pays.nom}">${pays.nom}</option>
			#{/list}
		</select>
		
		<select id="annee" multiple>
			<option selected disabled>Années</option>
			#{list items:listeAnnees, as:'annee'}
				<option value="${annee.annee}">${annee.annee}</option>
			#{/list}
		</select>
		
		<ul>
			<li><input type="checkbox" value="population" />Nombre d'habitants</li>
			<li><input type="checkbox" value="natalite" />Natalité</li>
			<li><input type="checkbox" value="mortalite" />Mortalité</li>
			<li><input type="checkbox" value="mortalite_infantile" />Mortalité infantile</li>
			<li><input type="checkbox" value="esperance_vie" />Espérance de vie</li>
			<li><input type="checkbox" value="croissance" />Croissance</li>
		</ul>
		
		<input type="submit" value="Comparer" id="comparer" />
	</form>
</section>
<section id="droite">
	<div id="chart_div"></div>
</section>

#{set 'moreScripts'}
<script>
(function($){
	   $('#comparer').click(function () {
		   drawBasic();
	   });
	   
	   
	   google.charts.load('current', {packages: ['corechart', 'line']});
	   google.charts.setOnLoadCallback(drawBasic);

	   function drawBasic() { alert("ok");

	         var data = new google.visualization.DataTable();
	         data.addColumn('string', 'Date');
	         data.addColumn('number', 'Dogs');
	         data.addColumn('number', 'Cats');

	         data.addRows([
		        #{list items: liste, as: 'data'}
	           		[${data.annee},${data.france}, ${data.en}],
	          	#{/list}
	         ]);
	     
	         var options = {
	           hAxis: {
	             title: 'Annee'
	           },
	           vAxis: {
	             title: 'Valeurs'
	           }
	         };

	         var chart = new google.visualization.LineChart(document.getElementById('chart_div'));

	         chart.draw(data, options);
	       }
})(jQuery);
</script>
#{/set}